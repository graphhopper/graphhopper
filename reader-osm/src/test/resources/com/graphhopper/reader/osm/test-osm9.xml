<?xml version='1.0' encoding='UTF-8'?>
<osm version="0.6">
    <node id="20" lat="51.21" lon="9.41" uid="24854"/>
    <node id="30" lat="51.22" lon="9.42" uid="24856"/>
    <way id="300" uid="85761">
        <!-- this node does not exist. this situation is rather common when extracting a bounding box using e.g. osmosis
             because it removes nodes that are located outside the box, but leaves the ways unchanged -->
        <nd ref="10"/>
        <nd ref="20"/>
        <nd ref="30"/>
        <tag k="highway" v="motorway"/>
    </way>
</osm>


        <!-- todonow: remove -->
        <!-- before fix: -->
        <!-- pass1: all three nd refs get tag "1" because they only occur once -->
        <!-- pass2: we add nodes 20 and 30 to the pillar storage and assign 'pillar ids' 3 and 4. node 10 does not get such a -->
        <!--        pillar id! -->
        <!--        then we parse the way. note that here we rely on nodes being parsed before ways! -->
        <!--        when we hit node 10 it has no pilar node id and the test fails because OSMReader assumes the first and last
                    nodes should be tower nodes even when some of them do not exist. -->
