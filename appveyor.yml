version: '{build}'
clone_depth: 10
image: Visual Studio 2019
skip_tags: true
environment:
  MAVEN_OPTS: -Xmx1g
  JAVA_OPTS: -Xmx1g
  JAVA_HOME: C:\Program Files\Java\jdk1.8.0
branches:
  only:
    - master
install:
  - ps: |
      mvn --version
      java -version
      
build_script:
  - mvn clean install -DskipTests=true -B
test_script:
  - mvn test verify -B && mvn checkstyle:check forbiddenapis:check -B
cache:
  - C:\maven\
  - C:\Users\appveyor\.m2
artifacts:
- path: web/target/*.jar